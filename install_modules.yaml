---
- hosts: database
  become: true
  vars_files:
  - secret
  tasks:
  - name: install certain python modules for docker
    pip:
      name: "{{ item.name }}"
      version: "{{ item.version }}"
      state: present
    with_items:
      - { name: docker, version: 2.0.0 }
  - name: ensure docker is started
    service:
      name: docker
      state: present
    notify: 
    - start docker
  handlers:
  - name: start docker
    ansible.builtin.service:
      name: docker
      state: restarted
